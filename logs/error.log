{"date":"Thu Apr 20 2017 23:43:05 GMT+0800 (CST)","process":{"pid":8875,"uid":501,"gid":20,"cwd":"/Users/cheungcj/Documents/Learning/node/blog","execPath":"/usr/local/bin/node","version":"v7.8.0","argv":["/usr/local/bin/node","/Users/cheungcj/Documents/Learning/node/blog/index"],"memoryUsage":{"rss":66551808,"heapTotal":45613056,"heapUsed":31346496,"external":18571467}},"os":{"loadavg":[2.84130859375,2.66357421875,2.53076171875],"uptime":1407081},"trace":[{"column":35,"file":"/Users/cheungcj/Documents/Learning/node/blog/routers/signin.js","function":null,"line":24,"method":null,"native":false},{"column":23,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/util.js","function":"tryCatcher","line":16,"method":null,"native":false},{"column":31,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js","function":"Promise._settlePromiseFromHandler","line":512,"method":"_settlePromiseFromHandler","native":false},{"column":18,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js","function":"Promise._settlePromise","line":569,"method":"_settlePromise","native":false},{"column":10,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js","function":"Promise._settlePromise0","line":614,"method":"_settlePromise0","native":false},{"column":18,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js","function":"Promise._settlePromises","line":693,"method":"_settlePromises","native":false},{"column":16,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/async.js","function":"Async._drainQueue","line":133,"method":"_drainQueue","native":false},{"column":10,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/async.js","function":"Async._drainQueues","line":143,"method":"_drainQueues","native":false},{"column":14,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/async.js","function":"Immediate.Async.drainQueues","line":17,"method":"Async.drainQueues","native":false},{"column":5,"file":"timers.js","function":"tryOnImmediate","line":645,"method":null,"native":false},{"column":5,"file":"timers.js","function":"processImmediate [as _immediateCallback]","line":617,"method":null,"native":false}],"stack":["TypeError: Cannot read property 'password' of null","    at /Users/cheungcj/Documents/Learning/node/blog/routers/signin.js:24:35","    at tryCatcher (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/util.js:16:23)","    at Promise._settlePromiseFromHandler (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js:512:31)","    at Promise._settlePromise (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js:569:18)","    at Promise._settlePromise0 (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js:614:10)","    at Promise._settlePromises (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js:693:18)","    at Async._drainQueue (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/async.js:133:16)","    at Async._drainQueues (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/async.js:143:10)","    at Immediate.Async.drainQueues (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/async.js:17:14)","    at tryOnImmediate (timers.js:645:5)","    at processImmediate [as _immediateCallback] (timers.js:617:5)"],"req":{"url":"/signinsignin","headers":{"host":"localhost:3000","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","accept-encoding":"gzip, deflate","accept-language":"zh-cn","content-type":"application/x-www-form-urlencoded","origin":"http://localhost:3000","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_4) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.1 Safari/603.1.30","connection":"keep-alive","upgrade-insecure-requests":"1","referer":"http://localhost:3000/signin","content-length":"32","cookie":"blog=s%3Abm__WnE7YlB8u4vIb0zMs8F0oB33RBFK.yQZcj0CQX%2FOf6nDma90CaPeBmcpUTpIxfVXxucuDVTo; myblog=s%3A4xhzRAs2wkyxpP934Jr3hPyMEE_ovVf-.qfnDmdvNXCZxeXvSKzYFGyAea5aoDIUixz5RI6uBqvM"},"method":"POST","httpVersion":"1.1","originalUrl":"/signin","query":{}},"level":"error","message":"middlewareError","timestamp":"2017-04-20T15:43:05.858Z"}
{"date":"Thu Apr 20 2017 23:45:22 GMT+0800 (CST)","process":{"pid":10388,"uid":501,"gid":20,"cwd":"/Users/cheungcj/Documents/Learning/node/blog","execPath":"/usr/local/bin/node","version":"v7.8.0","argv":["/usr/local/bin/node","/Users/cheungcj/Documents/Learning/node/blog/index"],"memoryUsage":{"rss":61116416,"heapTotal":31965184,"heapUsed":27426808,"external":18703226}},"os":{"loadavg":[2.5126953125,2.64208984375,2.5439453125],"uptime":1407218},"trace":[{"column":35,"file":"/Users/cheungcj/Documents/Learning/node/blog/routers/signin.js","function":null,"line":24,"method":null,"native":false},{"column":23,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/util.js","function":"tryCatcher","line":16,"method":null,"native":false},{"column":31,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js","function":"Promise._settlePromiseFromHandler","line":512,"method":"_settlePromiseFromHandler","native":false},{"column":18,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js","function":"Promise._settlePromise","line":569,"method":"_settlePromise","native":false},{"column":10,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js","function":"Promise._settlePromise0","line":614,"method":"_settlePromise0","native":false},{"column":18,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js","function":"Promise._settlePromises","line":693,"method":"_settlePromises","native":false},{"column":16,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/async.js","function":"Async._drainQueue","line":133,"method":"_drainQueue","native":false},{"column":10,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/async.js","function":"Async._drainQueues","line":143,"method":"_drainQueues","native":false},{"column":14,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/async.js","function":"Immediate.Async.drainQueues","line":17,"method":"Async.drainQueues","native":false},{"column":5,"file":"timers.js","function":"tryOnImmediate","line":645,"method":null,"native":false},{"column":5,"file":"timers.js","function":"processImmediate [as _immediateCallback]","line":617,"method":null,"native":false}],"stack":["TypeError: Cannot read property 'password' of null","    at /Users/cheungcj/Documents/Learning/node/blog/routers/signin.js:24:35","    at tryCatcher (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/util.js:16:23)","    at Promise._settlePromiseFromHandler (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js:512:31)","    at Promise._settlePromise (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js:569:18)","    at Promise._settlePromise0 (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js:614:10)","    at Promise._settlePromises (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js:693:18)","    at Async._drainQueue (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/async.js:133:16)","    at Async._drainQueues (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/async.js:143:10)","    at Immediate.Async.drainQueues (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/async.js:17:14)","    at tryOnImmediate (timers.js:645:5)","    at processImmediate [as _immediateCallback] (timers.js:617:5)"],"req":{"url":"/signinsignin","headers":{"host":"localhost:3000","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","accept-encoding":"gzip, deflate","accept-language":"zh-cn","content-type":"application/x-www-form-urlencoded","origin":"http://localhost:3000","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_4) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.1 Safari/603.1.30","connection":"keep-alive","upgrade-insecure-requests":"1","referer":"http://localhost:3000/signin","content-length":"27","cookie":"myblog=s%3A4xhzRAs2wkyxpP934Jr3hPyMEE_ovVf-.qfnDmdvNXCZxeXvSKzYFGyAea5aoDIUixz5RI6uBqvM; blog=s%3Abm__WnE7YlB8u4vIb0zMs8F0oB33RBFK.yQZcj0CQX%2FOf6nDma90CaPeBmcpUTpIxfVXxucuDVTo"},"method":"POST","httpVersion":"1.1","originalUrl":"/signin","query":{}},"level":"error","message":"middlewareError","timestamp":"2017-04-20T15:45:22.023Z"}
{"date":"Fri Apr 21 2017 00:30:57 GMT+0800 (CST)","process":{"pid":40967,"uid":501,"gid":20,"cwd":"/Users/cheungcj/Documents/Learning/node/blog","execPath":"/usr/local/bin/node","version":"v7.8.0","argv":["/usr/local/bin/node","/Users/cheungcj/Documents/Learning/node/blog/index"],"memoryUsage":{"rss":67756032,"heapTotal":45592576,"heapUsed":31995768,"external":18602111}},"os":{"loadavg":[3.1533203125,2.74609375,2.60888671875],"uptime":1409953},"trace":[{"column":23,"file":"/Users/cheungcj/Documents/Learning/node/blog/models/posts.js","function":"Object.getPostById","line":11,"method":"getPostById","native":false},{"column":15,"file":"/Users/cheungcj/Documents/Learning/node/blog/routers/posts.js","function":null,"line":61,"method":null,"native":false},{"column":5,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js","function":"Layer.handle [as handle_request]","line":95,"method":"handle [as handle_request]","native":false},{"column":13,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js","function":"next","line":137,"method":null,"native":false},{"column":3,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js","function":"Route.dispatch","line":112,"method":"dispatch","native":false},{"column":5,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js","function":"Layer.handle [as handle_request]","line":95,"method":"handle [as handle_request]","native":false},{"column":3,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"Function.process_params","line":410,"method":"process_params","native":false},{"column":10,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"next","line":275,"method":null,"native":false},{"column":3,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"Function.handle","line":174,"method":"handle","native":false},{"column":12,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"router","line":47,"method":null,"native":false},{"column":5,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js","function":"Layer.handle [as handle_request]","line":95,"method":"handle [as handle_request]","native":false},{"column":13,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"trim_prefix","line":317,"method":null,"native":false},{"column":7,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":null,"line":284,"method":null,"native":false},{"column":10,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"next","line":275,"method":null,"native":false},{"column":9,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express-winston@2.3.0@express-winston/index.js","function":null,"line":318,"method":null,"native":false},{"column":5,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js","function":"Layer.handle [as handle_request]","line":95,"method":"handle [as handle_request]","native":false}],"stack":["ReferenceError: postId is not defined","    at Object.getPostById (/Users/cheungcj/Documents/Learning/node/blog/models/posts.js:11:23)","    at /Users/cheungcj/Documents/Learning/node/blog/routers/posts.js:61:15","    at Layer.handle [as handle_request] (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js:95:5)","    at next (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js:137:13)","    at Route.dispatch (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js:112:3)","    at Layer.handle [as handle_request] (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js:95:5)","    at Function.process_params (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:410:3)","    at next (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:275:10)","    at Function.handle (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:174:3)","    at router (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:47:12)","    at Layer.handle [as handle_request] (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js:95:5)","    at trim_prefix (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:317:13)","    at /Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:284:7","    at next (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:275:10)","    at /Users/cheungcj/Documents/Learning/node/blog/node_modules/._express-winston@2.3.0@express-winston/index.js:318:9","    at Layer.handle [as handle_request] (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js:95:5)"],"req":{"url":"/posts/58f8deca7cd008798cc62d30","headers":{"host":"localhost:3000","origin":"http://localhost:3000","cookie":"blog=s%3Abm__WnE7YlB8u4vIb0zMs8F0oB33RBFK.yQZcj0CQX%2FOf6nDma90CaPeBmcpUTpIxfVXxucuDVTo; myblog=s%3A4xhzRAs2wkyxpP934Jr3hPyMEE_ovVf-.qfnDmdvNXCZxeXvSKzYFGyAea5aoDIUixz5RI6uBqvM","connection":"keep-alive","upgrade-insecure-requests":"1","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_4) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.1 Safari/603.1.30","accept-language":"zh-cn","referer":"http://localhost:3000/posts/create","accept-encoding":"gzip, deflate"},"method":"GET","httpVersion":"1.1","originalUrl":"/posts/58f8deca7cd008798cc62d30","query":{}},"level":"error","message":"middlewareError","timestamp":"2017-04-20T16:30:57.183Z"}
{"date":"Fri Apr 21 2017 00:33:16 GMT+0800 (CST)","process":{"pid":40967,"uid":501,"gid":20,"cwd":"/Users/cheungcj/Documents/Learning/node/blog","execPath":"/usr/local/bin/node","version":"v7.8.0","argv":["/usr/local/bin/node","/Users/cheungcj/Documents/Learning/node/blog/index"],"memoryUsage":{"rss":60534784,"heapTotal":30916608,"heapUsed":26944384,"external":17879216}},"os":{"loadavg":[2.0498046875,2.53369140625,2.54736328125],"uptime":1410092},"trace":[{"column":23,"file":"/Users/cheungcj/Documents/Learning/node/blog/models/posts.js","function":"Object.getPostById","line":11,"method":"getPostById","native":false},{"column":15,"file":"/Users/cheungcj/Documents/Learning/node/blog/routers/posts.js","function":null,"line":61,"method":null,"native":false},{"column":5,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js","function":"Layer.handle [as handle_request]","line":95,"method":"handle [as handle_request]","native":false},{"column":13,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js","function":"next","line":137,"method":null,"native":false},{"column":3,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js","function":"Route.dispatch","line":112,"method":"dispatch","native":false},{"column":5,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js","function":"Layer.handle [as handle_request]","line":95,"method":"handle [as handle_request]","native":false},{"column":3,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"Function.process_params","line":410,"method":"process_params","native":false},{"column":10,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"next","line":275,"method":null,"native":false},{"column":3,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"Function.handle","line":174,"method":"handle","native":false},{"column":12,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"router","line":47,"method":null,"native":false},{"column":5,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js","function":"Layer.handle [as handle_request]","line":95,"method":"handle [as handle_request]","native":false},{"column":13,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"trim_prefix","line":317,"method":null,"native":false},{"column":7,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":null,"line":284,"method":null,"native":false},{"column":10,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"next","line":275,"method":null,"native":false},{"column":9,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express-winston@2.3.0@express-winston/index.js","function":null,"line":318,"method":null,"native":false},{"column":5,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js","function":"Layer.handle [as handle_request]","line":95,"method":"handle [as handle_request]","native":false}],"stack":["ReferenceError: postId is not defined","    at Object.getPostById (/Users/cheungcj/Documents/Learning/node/blog/models/posts.js:11:23)","    at /Users/cheungcj/Documents/Learning/node/blog/routers/posts.js:61:15","    at Layer.handle [as handle_request] (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js:95:5)","    at next (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js:137:13)","    at Route.dispatch (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js:112:3)","    at Layer.handle [as handle_request] (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js:95:5)","    at Function.process_params (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:410:3)","    at next (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:275:10)","    at Function.handle (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:174:3)","    at router (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:47:12)","    at Layer.handle [as handle_request] (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js:95:5)","    at trim_prefix (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:317:13)","    at /Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:284:7","    at next (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:275:10)","    at /Users/cheungcj/Documents/Learning/node/blog/node_modules/._express-winston@2.3.0@express-winston/index.js:318:9","    at Layer.handle [as handle_request] (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js:95:5)"],"req":{"url":"/posts/58f8deca7cd008798cc62d30","headers":{"host":"localhost:3000","origin":"http://localhost:3000","cookie":"blog=s%3Abm__WnE7YlB8u4vIb0zMs8F0oB33RBFK.yQZcj0CQX%2FOf6nDma90CaPeBmcpUTpIxfVXxucuDVTo; myblog=s%3A4xhzRAs2wkyxpP934Jr3hPyMEE_ovVf-.qfnDmdvNXCZxeXvSKzYFGyAea5aoDIUixz5RI6uBqvM","connection":"keep-alive","upgrade-insecure-requests":"1","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_4) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.1 Safari/603.1.30","accept-language":"zh-cn","referer":"http://localhost:3000/posts/create","accept-encoding":"gzip, deflate"},"method":"GET","httpVersion":"1.1","originalUrl":"/posts/58f8deca7cd008798cc62d30","query":{}},"level":"error","message":"middlewareError","timestamp":"2017-04-20T16:33:16.250Z"}
{"date":"Fri Apr 21 2017 00:43:57 GMT+0800 (CST)","process":{"pid":49588,"uid":501,"gid":20,"cwd":"/Users/cheungcj/Documents/Learning/node/blog","execPath":"/usr/local/bin/node","version":"v7.8.0","argv":["/usr/local/bin/node","/Users/cheungcj/Documents/Learning/node/blog/index"],"memoryUsage":{"rss":75943936,"heapTotal":47689728,"heapUsed":35488040,"external":18669761}},"os":{"loadavg":[2.80029296875,2.6259765625,2.58984375],"uptime":1410733},"trace":[{"column":33,"file":"/Users/cheungcj/Documents/Learning/node/blog/models/posts.js","function":"Object.delPostById","line":50,"method":"delPostById","native":false},{"column":13,"file":"/Users/cheungcj/Documents/Learning/node/blog/routers/posts.js","function":null,"line":118,"method":null,"native":false},{"column":5,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js","function":"Layer.handle [as handle_request]","line":95,"method":"handle [as handle_request]","native":false},{"column":13,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js","function":"next","line":137,"method":null,"native":false},{"column":5,"file":"/Users/cheungcj/Documents/Learning/node/blog/middlewares/check.js","function":"checkLogin","line":7,"method":null,"native":false},{"column":5,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js","function":"Layer.handle [as handle_request]","line":95,"method":"handle [as handle_request]","native":false},{"column":13,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js","function":"next","line":137,"method":null,"native":false},{"column":3,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js","function":"Route.dispatch","line":112,"method":"dispatch","native":false},{"column":5,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js","function":"Layer.handle [as handle_request]","line":95,"method":"handle [as handle_request]","native":false},{"column":3,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"Function.process_params","line":410,"method":"process_params","native":false},{"column":10,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"next","line":275,"method":null,"native":false},{"column":3,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"Function.handle","line":174,"method":"handle","native":false},{"column":12,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"router","line":47,"method":null,"native":false},{"column":5,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js","function":"Layer.handle [as handle_request]","line":95,"method":"handle [as handle_request]","native":false},{"column":13,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"trim_prefix","line":317,"method":null,"native":false},{"column":7,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":null,"line":284,"method":null,"native":false}],"stack":["ReferenceError: author is not defined","    at Object.delPostById (/Users/cheungcj/Documents/Learning/node/blog/models/posts.js:50:33)","    at /Users/cheungcj/Documents/Learning/node/blog/routers/posts.js:118:13","    at Layer.handle [as handle_request] (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js:95:5)","    at next (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js:137:13)","    at checkLogin (/Users/cheungcj/Documents/Learning/node/blog/middlewares/check.js:7:5)","    at Layer.handle [as handle_request] (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js:95:5)","    at next (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js:137:13)","    at Route.dispatch (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js:112:3)","    at Layer.handle [as handle_request] (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js:95:5)","    at Function.process_params (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:410:3)","    at next (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:275:10)","    at Function.handle (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:174:3)","    at router (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:47:12)","    at Layer.handle [as handle_request] (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js:95:5)","    at trim_prefix (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:317:13)","    at /Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:284:7"],"req":{"url":"/posts/58f8deca7cd008798cc62d30/remove","headers":{"host":"localhost:3000","cookie":"blog=s%3Abm__WnE7YlB8u4vIb0zMs8F0oB33RBFK.yQZcj0CQX%2FOf6nDma90CaPeBmcpUTpIxfVXxucuDVTo; myblog=s%3A4xhzRAs2wkyxpP934Jr3hPyMEE_ovVf-.qfnDmdvNXCZxeXvSKzYFGyAea5aoDIUixz5RI6uBqvM","connection":"keep-alive","upgrade-insecure-requests":"1","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_4) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.1 Safari/603.1.30","referer":"http://localhost:3000/posts/58f8deca7cd008798cc62d30","accept-language":"zh-cn","accept-encoding":"gzip, deflate"},"method":"GET","httpVersion":"1.1","originalUrl":"/posts/58f8deca7cd008798cc62d30/remove","query":{}},"level":"error","message":"middlewareError","timestamp":"2017-04-20T16:43:57.533Z"}
{"date":"Fri Apr 21 2017 17:47:31 GMT+0800 (CST)","process":{"pid":14005,"uid":501,"gid":20,"cwd":"/Users/cheungcj/Documents/Learning/node/blog","execPath":"/usr/local/bin/node","version":"v7.8.0","argv":["/usr/local/bin/node","/Users/cheungcj/Documents/Learning/node/blog/index"],"memoryUsage":{"rss":74268672,"heapTotal":46641152,"heapUsed":33239120,"external":18642357}},"os":{"loadavg":[2.2578125,2.09619140625,2.0087890625],"uptime":1472149},"trace":[{"column":26,"file":"<anonymous>","function":"eval (eval at compile (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._ejs@2.5.6@ejs/lib/ejs.js:524:12),","line":11,"method":"_ejs@2.5.6@ejs/lib/ejs.js:524:12),","native":false},{"column":17,"file":"<anonymous>","function":"eval (eval at compile (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._ejs@2.5.6@ejs/lib/ejs.js:524:12),","line":12,"method":"_ejs@2.5.6@ejs/lib/ejs.js:524:12),","native":false},{"column":34,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._ejs@2.5.6@ejs/lib/ejs.js","function":"tryHandleCache","line":203,"method":null,"native":false},{"column":8,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/view.js","function":"View.render","line":128,"method":"render","native":false},{"column":10,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/application.js","function":"tryRender","line":640,"method":null,"native":false},{"column":3,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/application.js","function":"Function.render","line":592,"method":"render","native":false},{"column":7,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/response.js","function":"ServerResponse.render","line":966,"method":"render","native":false},{"column":11,"file":"/Users/cheungcj/Documents/Learning/node/blog/routers/posts.js","function":null,"line":12,"method":null,"native":false},{"column":23,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/util.js","function":"tryCatcher","line":16,"method":null,"native":false},{"column":31,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js","function":"Promise._settlePromiseFromHandler","line":512,"method":"_settlePromiseFromHandler","native":false},{"column":18,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js","function":"Promise._settlePromise","line":569,"method":"_settlePromise","native":false},{"column":10,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js","function":"Promise._settlePromise0","line":614,"method":"_settlePromise0","native":false},{"column":18,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js","function":"Promise._settlePromises","line":693,"method":"_settlePromises","native":false},{"column":16,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/async.js","function":"Async._drainQueue","line":133,"method":"_drainQueue","native":false},{"column":10,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/async.js","function":"Async._drainQueues","line":143,"method":"_drainQueues","native":false},{"column":14,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/async.js","function":"Immediate.Async.drainQueues","line":17,"method":"Async.drainQueues","native":false}],"stack":["ReferenceError: /Users/cheungcj/Documents/Learning/node/blog/views/posts.ejs:3","    1| <%- include('header') %>","    2| "," >> 3| <%- include('components/post-content') %>","    4| <%- include('components/comments') %>","    5| ","    6| <%- include('footer') %>","","/Users/cheungcj/Documents/Learning/node/blog/views/components/post-content.ejs:5","    3|     <div class=\"four wide column\">","    4|       <a class=\"avatar\""," >> 5|          href=\"/posts?author=<%= post.author._id %>\"","    6|          data-title=\"<%= post.author.name %> | <%= ({m: '男', f: '女', x: '保密'})[post.author.gender] %>\"","    7|          data-content=\"<%= post.author.bio %>\">","    8|         <img class=\"avatar\" src=\"/img/<%= post.author.avatar %>\">","","post is not defined","    at eval (eval at compile (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._ejs@2.5.6@ejs/lib/ejs.js:524:12), <anonymous>:11:26)","    at eval (eval at compile (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._ejs@2.5.6@ejs/lib/ejs.js:524:12), <anonymous>:12:17)","    at tryHandleCache (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._ejs@2.5.6@ejs/lib/ejs.js:203:34)","    at View.render (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/view.js:128:8)","    at tryRender (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/application.js:640:10)","    at Function.render (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/application.js:592:3)","    at ServerResponse.render (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/response.js:966:7)","    at /Users/cheungcj/Documents/Learning/node/blog/routers/posts.js:12:11","    at tryCatcher (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/util.js:16:23)","    at Promise._settlePromiseFromHandler (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js:512:31)","    at Promise._settlePromise (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js:569:18)","    at Promise._settlePromise0 (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js:614:10)","    at Promise._settlePromises (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js:693:18)","    at Async._drainQueue (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/async.js:133:16)","    at Async._drainQueues (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/async.js:143:10)","    at Immediate.Async.drainQueues (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/async.js:17:14)"],"req":{"url":"/posts","headers":{"host":"localhost:3000","cookie":"myblog=s%3A4xhzRAs2wkyxpP934Jr3hPyMEE_ovVf-.qfnDmdvNXCZxeXvSKzYFGyAea5aoDIUixz5RI6uBqvM; blog=s%3Abm__WnE7YlB8u4vIb0zMs8F0oB33RBFK.yQZcj0CQX%2FOf6nDma90CaPeBmcpUTpIxfVXxucuDVTo","connection":"keep-alive","if-none-match":"W/\"144c-HWkf0BCKDcruLC/cY/gNWQ\"","upgrade-insecure-requests":"1","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_4) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.1 Safari/603.1.30","referer":"http://localhost:3000/posts","accept-language":"zh-cn","accept-encoding":"gzip, deflate"},"method":"GET","httpVersion":"1.1","originalUrl":"/posts","query":{}},"level":"error","message":"middlewareError","timestamp":"2017-04-21T09:47:31.338Z"}
{"date":"Fri Apr 21 2017 17:49:07 GMT+0800 (CST)","process":{"pid":14955,"uid":501,"gid":20,"cwd":"/Users/cheungcj/Documents/Learning/node/blog","execPath":"/usr/local/bin/node","version":"v7.8.0","argv":["/usr/local/bin/node","/Users/cheungcj/Documents/Learning/node/blog/index"],"memoryUsage":{"rss":61263872,"heapTotal":31440896,"heapUsed":27770192,"external":17901313}},"os":{"loadavg":[2.474609375,2.1513671875,2.033203125],"uptime":1472245},"trace":[{"column":18,"file":"/Users/cheungcj/Documents/Learning/node/blog/routers/posts.js","function":null,"line":63,"method":null,"native":false},{"column":5,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js","function":"Layer.handle [as handle_request]","line":95,"method":"handle [as handle_request]","native":false},{"column":13,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js","function":"next","line":137,"method":null,"native":false},{"column":3,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js","function":"Route.dispatch","line":112,"method":"dispatch","native":false},{"column":5,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js","function":"Layer.handle [as handle_request]","line":95,"method":"handle [as handle_request]","native":false},{"column":3,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"Function.process_params","line":410,"method":"process_params","native":false},{"column":10,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"next","line":275,"method":null,"native":false},{"column":3,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"Function.handle","line":174,"method":"handle","native":false},{"column":12,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"router","line":47,"method":null,"native":false},{"column":5,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js","function":"Layer.handle [as handle_request]","line":95,"method":"handle [as handle_request]","native":false},{"column":13,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"trim_prefix","line":317,"method":null,"native":false},{"column":7,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":null,"line":284,"method":null,"native":false},{"column":10,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"next","line":275,"method":null,"native":false},{"column":9,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express-winston@2.3.0@express-winston/index.js","function":null,"line":318,"method":null,"native":false},{"column":5,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js","function":"Layer.handle [as handle_request]","line":95,"method":"handle [as handle_request]","native":false},{"column":13,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"trim_prefix","line":317,"method":null,"native":false}],"stack":["TypeError: CommentModel.getCOmments is not a function","    at /Users/cheungcj/Documents/Learning/node/blog/routers/posts.js:63:18","    at Layer.handle [as handle_request] (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js:95:5)","    at next (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js:137:13)","    at Route.dispatch (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js:112:3)","    at Layer.handle [as handle_request] (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js:95:5)","    at Function.process_params (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:410:3)","    at next (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:275:10)","    at Function.handle (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:174:3)","    at router (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:47:12)","    at Layer.handle [as handle_request] (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js:95:5)","    at trim_prefix (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:317:13)","    at /Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:284:7","    at next (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:275:10)","    at /Users/cheungcj/Documents/Learning/node/blog/node_modules/._express-winston@2.3.0@express-winston/index.js:318:9","    at Layer.handle [as handle_request] (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js:95:5)","    at trim_prefix (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:317:13)"],"req":{"url":"/posts/58f9d593e86bdd3a6bbd2903","headers":{"host":"localhost:3000","origin":"http://localhost:3000","cookie":"blog=s%3Abm__WnE7YlB8u4vIb0zMs8F0oB33RBFK.yQZcj0CQX%2FOf6nDma90CaPeBmcpUTpIxfVXxucuDVTo; myblog=s%3A4xhzRAs2wkyxpP934Jr3hPyMEE_ovVf-.qfnDmdvNXCZxeXvSKzYFGyAea5aoDIUixz5RI6uBqvM","connection":"keep-alive","upgrade-insecure-requests":"1","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","accept-language":"zh-cn","referer":"http://localhost:3000/posts/create","accept-encoding":"gzip, deflate","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_4) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.1 Safari/603.1.30"},"method":"GET","httpVersion":"1.1","originalUrl":"/posts/58f9d593e86bdd3a6bbd2903","query":{}},"level":"error","message":"middlewareError","timestamp":"2017-04-21T09:49:07.929Z"}
{"date":"Fri Apr 21 2017 17:49:39 GMT+0800 (CST)","process":{"pid":15550,"uid":501,"gid":20,"cwd":"/Users/cheungcj/Documents/Learning/node/blog","execPath":"/usr/local/bin/node","version":"v7.8.0","argv":["/usr/local/bin/node","/Users/cheungcj/Documents/Learning/node/blog/index"],"memoryUsage":{"rss":69308416,"heapTotal":45088768,"heapUsed":31015312,"external":18596314}},"os":{"loadavg":[3.263671875,2.38525390625,2.1220703125],"uptime":1472277},"trace":[{"column":18,"file":"/Users/cheungcj/Documents/Learning/node/blog/routers/posts.js","function":null,"line":63,"method":null,"native":false},{"column":5,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js","function":"Layer.handle [as handle_request]","line":95,"method":"handle [as handle_request]","native":false},{"column":13,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js","function":"next","line":137,"method":null,"native":false},{"column":3,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js","function":"Route.dispatch","line":112,"method":"dispatch","native":false},{"column":5,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js","function":"Layer.handle [as handle_request]","line":95,"method":"handle [as handle_request]","native":false},{"column":3,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"Function.process_params","line":410,"method":"process_params","native":false},{"column":10,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"next","line":275,"method":null,"native":false},{"column":3,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"Function.handle","line":174,"method":"handle","native":false},{"column":12,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"router","line":47,"method":null,"native":false},{"column":5,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js","function":"Layer.handle [as handle_request]","line":95,"method":"handle [as handle_request]","native":false},{"column":13,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"trim_prefix","line":317,"method":null,"native":false},{"column":7,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":null,"line":284,"method":null,"native":false},{"column":10,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"next","line":275,"method":null,"native":false},{"column":9,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express-winston@2.3.0@express-winston/index.js","function":null,"line":318,"method":null,"native":false},{"column":5,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js","function":"Layer.handle [as handle_request]","line":95,"method":"handle [as handle_request]","native":false},{"column":13,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"trim_prefix","line":317,"method":null,"native":false}],"stack":["TypeError: CommentModel.getComments is not a function","    at /Users/cheungcj/Documents/Learning/node/blog/routers/posts.js:63:18","    at Layer.handle [as handle_request] (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js:95:5)","    at next (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js:137:13)","    at Route.dispatch (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js:112:3)","    at Layer.handle [as handle_request] (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js:95:5)","    at Function.process_params (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:410:3)","    at next (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:275:10)","    at Function.handle (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:174:3)","    at router (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:47:12)","    at Layer.handle [as handle_request] (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js:95:5)","    at trim_prefix (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:317:13)","    at /Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:284:7","    at next (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:275:10)","    at /Users/cheungcj/Documents/Learning/node/blog/node_modules/._express-winston@2.3.0@express-winston/index.js:318:9","    at Layer.handle [as handle_request] (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js:95:5)","    at trim_prefix (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:317:13)"],"req":{"url":"/posts/58f9d593e86bdd3a6bbd2903","headers":{"host":"localhost:3000","origin":"http://localhost:3000","cookie":"blog=s%3Abm__WnE7YlB8u4vIb0zMs8F0oB33RBFK.yQZcj0CQX%2FOf6nDma90CaPeBmcpUTpIxfVXxucuDVTo; myblog=s%3A4xhzRAs2wkyxpP934Jr3hPyMEE_ovVf-.qfnDmdvNXCZxeXvSKzYFGyAea5aoDIUixz5RI6uBqvM","connection":"keep-alive","upgrade-insecure-requests":"1","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_4) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.1 Safari/603.1.30","accept-language":"zh-cn","referer":"http://localhost:3000/posts/create","accept-encoding":"gzip, deflate"},"method":"GET","httpVersion":"1.1","originalUrl":"/posts/58f9d593e86bdd3a6bbd2903","query":{}},"level":"error","message":"middlewareError","timestamp":"2017-04-21T09:49:39.319Z"}
{"date":"Fri Apr 21 2017 17:56:38 GMT+0800 (CST)","process":{"pid":20157,"uid":501,"gid":20,"cwd":"/Users/cheungcj/Documents/Learning/node/blog","execPath":"/usr/local/bin/node","version":"v7.8.0","argv":["/usr/local/bin/node","/Users/cheungcj/Documents/Learning/node/blog/index"],"memoryUsage":{"rss":72445952,"heapTotal":45613056,"heapUsed":31395896,"external":18603461}},"os":{"loadavg":[3.14404296875,2.55615234375,2.27685546875],"uptime":1472696},"trace":[{"column":17,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._another-json-schema@2.1.0@another-json-schema/index.js","function":"throwError","line":213,"method":null,"native":false},{"column":7,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._another-json-schema@2.1.0@another-json-schema/index.js","function":"validate","line":184,"method":null,"native":false},{"column":29,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._another-json-schema@2.1.0@another-json-schema/index.js","function":"iterator","line":133,"method":null,"native":false},{"column":11,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._another-json-schema@2.1.0@another-json-schema/index.js","function":"_validateObject","line":108,"method":null,"native":false},{"column":25,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._mongolass@2.4.5@mongolass/lib/schema.js","function":"formatCreate","line":186,"method":null,"native":false},{"column":null,"file":null,"function":"Array.forEach","line":null,"method":"forEach","native":true},{"column":12,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._mongolass@2.4.5@mongolass/lib/schema.js","function":"Query.beforeInsert","line":93,"method":"beforeInsert","native":false},{"column":44,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._mongolass@2.4.5@mongolass/lib/query.js","function":null,"line":146,"method":null,"native":false},{"column":null,"file":null,"function":"Generator.next","line":null,"method":"next","native":false},{"column":19,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._co@4.6.0@co/index.js","function":"onFulfilled","line":65,"method":null,"native":false},{"column":5,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._co@4.6.0@co/index.js","function":null,"line":54,"method":null,"native":false},{"column":10,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._co@4.6.0@co/index.js","function":"co","line":50,"method":null,"native":false},{"column":23,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/util.js","function":"tryCatcher","line":16,"method":null,"native":false},{"column":31,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js","function":"Promise._settlePromiseFromHandler","line":512,"method":"_settlePromiseFromHandler","native":false},{"column":18,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js","function":"Promise._settlePromise","line":569,"method":"_settlePromise","native":false},{"column":10,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js","function":"Promise._settlePromiseCtx","line":606,"method":"_settlePromiseCtx","native":false},{"column":16,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._mongolass@2.4.5@mongolass/lib/query.js","function":"Model.insert","line":108,"method":"insert","native":false},{"column":20,"file":"/Users/cheungcj/Documents/Learning/node/blog/models/comments.js","function":"Object.create","line":15,"method":"create","native":false},{"column":16,"file":"/Users/cheungcj/Documents/Learning/node/blog/routers/posts.js","function":null,"line":141,"method":null,"native":false},{"column":5,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js","function":"Layer.handle [as handle_request]","line":95,"method":"handle [as handle_request]","native":false},{"column":13,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js","function":"next","line":137,"method":null,"native":false},{"column":5,"file":"/Users/cheungcj/Documents/Learning/node/blog/middlewares/check.js","function":"checkLogin","line":7,"method":null,"native":false},{"column":5,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js","function":"Layer.handle [as handle_request]","line":95,"method":"handle [as handle_request]","native":false},{"column":13,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js","function":"next","line":137,"method":null,"native":false},{"column":3,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js","function":"Route.dispatch","line":112,"method":"dispatch","native":false},{"column":5,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js","function":"Layer.handle [as handle_request]","line":95,"method":"handle [as handle_request]","native":false},{"column":3,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"Function.process_params","line":410,"method":"process_params","native":false},{"column":10,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"next","line":275,"method":null,"native":false},{"column":3,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"Function.handle","line":174,"method":"handle","native":false},{"column":12,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"router","line":47,"method":null,"native":false},{"column":5,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js","function":"Layer.handle [as handle_request]","line":95,"method":"handle [as handle_request]","native":false},{"column":13,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"trim_prefix","line":317,"method":null,"native":false}],"stack":["Error: ($.postId: undefined) ✖ (type: ObjectId)","    at throwError (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._another-json-schema@2.1.0@another-json-schema/index.js:213:17)","    at validate (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._another-json-schema@2.1.0@another-json-schema/index.js:184:7)","    at iterator (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._another-json-schema@2.1.0@another-json-schema/index.js:133:29)","    at _validateObject (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._another-json-schema@2.1.0@another-json-schema/index.js:108:11)","    at formatCreate (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._mongolass@2.4.5@mongolass/lib/schema.js:186:25)","    at Array.forEach (native)","    at Query.beforeInsert (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._mongolass@2.4.5@mongolass/lib/schema.js:93:12)","    at /Users/cheungcj/Documents/Learning/node/blog/node_modules/._mongolass@2.4.5@mongolass/lib/query.js:146:44","    at Generator.next (<anonymous>)","    at onFulfilled (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._co@4.6.0@co/index.js:65:19)","    at /Users/cheungcj/Documents/Learning/node/blog/node_modules/._co@4.6.0@co/index.js:54:5","    at co (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._co@4.6.0@co/index.js:50:10)","    at tryCatcher (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/util.js:16:23)","    at Promise._settlePromiseFromHandler (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js:512:31)","    at Promise._settlePromise (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js:569:18)","    at Promise._settlePromiseCtx (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js:606:10)","----- Mongolass error stack -----","Error","    at Model.insert (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._mongolass@2.4.5@mongolass/lib/query.js:108:16)","    at Object.create (/Users/cheungcj/Documents/Learning/node/blog/models/comments.js:15:20)","    at /Users/cheungcj/Documents/Learning/node/blog/routers/posts.js:141:16","    at Layer.handle [as handle_request] (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js:95:5)","    at next (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js:137:13)","    at checkLogin (/Users/cheungcj/Documents/Learning/node/blog/middlewares/check.js:7:5)","    at Layer.handle [as handle_request] (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js:95:5)","    at next (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js:137:13)","    at Route.dispatch (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js:112:3)","    at Layer.handle [as handle_request] (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js:95:5)","    at Function.process_params (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:410:3)","    at next (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:275:10)","    at Function.handle (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:174:3)","    at router (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:47:12)","    at Layer.handle [as handle_request] (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js:95:5)","    at trim_prefix (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:317:13)"],"req":{"url":"/posts/58f9d6056a64af3fa4daee82/comment","headers":{"host":"localhost:3000","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","accept-encoding":"gzip, deflate","accept-language":"zh-cn","content-type":"application/x-www-form-urlencoded","origin":"http://localhost:3000","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_4) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.1 Safari/603.1.30","connection":"keep-alive","upgrade-insecure-requests":"1","referer":"http://localhost:3000/posts/58f9d6056a64af3fa4daee82","content-length":"12","cookie":"blog=s%3Abm__WnE7YlB8u4vIb0zMs8F0oB33RBFK.yQZcj0CQX%2FOf6nDma90CaPeBmcpUTpIxfVXxucuDVTo; myblog=s%3A4xhzRAs2wkyxpP934Jr3hPyMEE_ovVf-.qfnDmdvNXCZxeXvSKzYFGyAea5aoDIUixz5RI6uBqvM"},"method":"POST","httpVersion":"1.1","originalUrl":"/posts/58f9d6056a64af3fa4daee82/comment","query":{}},"level":"error","message":"middlewareError","timestamp":"2017-04-21T09:56:38.774Z"}
{"date":"Fri Apr 21 2017 17:56:44 GMT+0800 (CST)","process":{"pid":20157,"uid":501,"gid":20,"cwd":"/Users/cheungcj/Documents/Learning/node/blog","execPath":"/usr/local/bin/node","version":"v7.8.0","argv":["/usr/local/bin/node","/Users/cheungcj/Documents/Learning/node/blog/index"],"memoryUsage":{"rss":74432512,"heapTotal":45613056,"heapUsed":33377688,"external":18651958}},"os":{"loadavg":[2.97216796875,2.5302734375,2.26904296875],"uptime":1472702},"trace":[{"column":17,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._another-json-schema@2.1.0@another-json-schema/index.js","function":"throwError","line":213,"method":null,"native":false},{"column":7,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._another-json-schema@2.1.0@another-json-schema/index.js","function":"validate","line":184,"method":null,"native":false},{"column":29,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._another-json-schema@2.1.0@another-json-schema/index.js","function":"iterator","line":133,"method":null,"native":false},{"column":11,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._another-json-schema@2.1.0@another-json-schema/index.js","function":"_validateObject","line":108,"method":null,"native":false},{"column":25,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._mongolass@2.4.5@mongolass/lib/schema.js","function":"formatCreate","line":186,"method":null,"native":false},{"column":null,"file":null,"function":"Array.forEach","line":null,"method":"forEach","native":true},{"column":12,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._mongolass@2.4.5@mongolass/lib/schema.js","function":"Query.beforeInsert","line":93,"method":"beforeInsert","native":false},{"column":44,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._mongolass@2.4.5@mongolass/lib/query.js","function":null,"line":146,"method":null,"native":false},{"column":null,"file":null,"function":"Generator.next","line":null,"method":"next","native":false},{"column":19,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._co@4.6.0@co/index.js","function":"onFulfilled","line":65,"method":null,"native":false},{"column":5,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._co@4.6.0@co/index.js","function":null,"line":54,"method":null,"native":false},{"column":10,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._co@4.6.0@co/index.js","function":"co","line":50,"method":null,"native":false},{"column":23,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/util.js","function":"tryCatcher","line":16,"method":null,"native":false},{"column":31,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js","function":"Promise._settlePromiseFromHandler","line":512,"method":"_settlePromiseFromHandler","native":false},{"column":18,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js","function":"Promise._settlePromise","line":569,"method":"_settlePromise","native":false},{"column":10,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js","function":"Promise._settlePromiseCtx","line":606,"method":"_settlePromiseCtx","native":false},{"column":16,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._mongolass@2.4.5@mongolass/lib/query.js","function":"Model.insert","line":108,"method":"insert","native":false},{"column":20,"file":"/Users/cheungcj/Documents/Learning/node/blog/models/comments.js","function":"Object.create","line":15,"method":"create","native":false},{"column":16,"file":"/Users/cheungcj/Documents/Learning/node/blog/routers/posts.js","function":null,"line":141,"method":null,"native":false},{"column":5,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js","function":"Layer.handle [as handle_request]","line":95,"method":"handle [as handle_request]","native":false},{"column":13,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js","function":"next","line":137,"method":null,"native":false},{"column":5,"file":"/Users/cheungcj/Documents/Learning/node/blog/middlewares/check.js","function":"checkLogin","line":7,"method":null,"native":false},{"column":5,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js","function":"Layer.handle [as handle_request]","line":95,"method":"handle [as handle_request]","native":false},{"column":13,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js","function":"next","line":137,"method":null,"native":false},{"column":3,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js","function":"Route.dispatch","line":112,"method":"dispatch","native":false},{"column":5,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js","function":"Layer.handle [as handle_request]","line":95,"method":"handle [as handle_request]","native":false},{"column":3,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"Function.process_params","line":410,"method":"process_params","native":false},{"column":10,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"next","line":275,"method":null,"native":false},{"column":3,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"Function.handle","line":174,"method":"handle","native":false},{"column":12,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"router","line":47,"method":null,"native":false},{"column":5,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js","function":"Layer.handle [as handle_request]","line":95,"method":"handle [as handle_request]","native":false},{"column":13,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"trim_prefix","line":317,"method":null,"native":false}],"stack":["Error: ($.postId: undefined) ✖ (type: ObjectId)","    at throwError (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._another-json-schema@2.1.0@another-json-schema/index.js:213:17)","    at validate (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._another-json-schema@2.1.0@another-json-schema/index.js:184:7)","    at iterator (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._another-json-schema@2.1.0@another-json-schema/index.js:133:29)","    at _validateObject (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._another-json-schema@2.1.0@another-json-schema/index.js:108:11)","    at formatCreate (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._mongolass@2.4.5@mongolass/lib/schema.js:186:25)","    at Array.forEach (native)","    at Query.beforeInsert (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._mongolass@2.4.5@mongolass/lib/schema.js:93:12)","    at /Users/cheungcj/Documents/Learning/node/blog/node_modules/._mongolass@2.4.5@mongolass/lib/query.js:146:44","    at Generator.next (<anonymous>)","    at onFulfilled (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._co@4.6.0@co/index.js:65:19)","    at /Users/cheungcj/Documents/Learning/node/blog/node_modules/._co@4.6.0@co/index.js:54:5","    at co (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._co@4.6.0@co/index.js:50:10)","    at tryCatcher (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/util.js:16:23)","    at Promise._settlePromiseFromHandler (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js:512:31)","    at Promise._settlePromise (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js:569:18)","    at Promise._settlePromiseCtx (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js:606:10)","----- Mongolass error stack -----","Error","    at Model.insert (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._mongolass@2.4.5@mongolass/lib/query.js:108:16)","    at Object.create (/Users/cheungcj/Documents/Learning/node/blog/models/comments.js:15:20)","    at /Users/cheungcj/Documents/Learning/node/blog/routers/posts.js:141:16","    at Layer.handle [as handle_request] (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js:95:5)","    at next (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js:137:13)","    at checkLogin (/Users/cheungcj/Documents/Learning/node/blog/middlewares/check.js:7:5)","    at Layer.handle [as handle_request] (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js:95:5)","    at next (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js:137:13)","    at Route.dispatch (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js:112:3)","    at Layer.handle [as handle_request] (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js:95:5)","    at Function.process_params (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:410:3)","    at next (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:275:10)","    at Function.handle (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:174:3)","    at router (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:47:12)","    at Layer.handle [as handle_request] (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js:95:5)","    at trim_prefix (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:317:13)"],"req":{"url":"/posts/58f9d6056a64af3fa4daee82/comment","headers":{"host":"localhost:3000","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","accept-encoding":"gzip, deflate","accept-language":"zh-cn","content-type":"application/x-www-form-urlencoded","origin":"http://localhost:3000","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_4) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.1 Safari/603.1.30","connection":"keep-alive","upgrade-insecure-requests":"1","referer":"http://localhost:3000/posts/58f9d6056a64af3fa4daee82","content-length":"18","cookie":"blog=s%3Abm__WnE7YlB8u4vIb0zMs8F0oB33RBFK.yQZcj0CQX%2FOf6nDma90CaPeBmcpUTpIxfVXxucuDVTo; myblog=s%3A4xhzRAs2wkyxpP934Jr3hPyMEE_ovVf-.qfnDmdvNXCZxeXvSKzYFGyAea5aoDIUixz5RI6uBqvM"},"method":"POST","httpVersion":"1.1","originalUrl":"/posts/58f9d6056a64af3fa4daee82/comment","query":{}},"level":"error","message":"middlewareError","timestamp":"2017-04-21T09:56:44.544Z"}
{"date":"Fri Apr 21 2017 17:56:52 GMT+0800 (CST)","process":{"pid":20157,"uid":501,"gid":20,"cwd":"/Users/cheungcj/Documents/Learning/node/blog","execPath":"/usr/local/bin/node","version":"v7.8.0","argv":["/usr/local/bin/node","/Users/cheungcj/Documents/Learning/node/blog/index"],"memoryUsage":{"rss":63635456,"heapTotal":33013760,"heapUsed":28736944,"external":18686832}},"os":{"loadavg":[2.982421875,2.54541015625,2.27685546875],"uptime":1472710},"trace":[{"column":17,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._another-json-schema@2.1.0@another-json-schema/index.js","function":"throwError","line":213,"method":null,"native":false},{"column":7,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._another-json-schema@2.1.0@another-json-schema/index.js","function":"validate","line":184,"method":null,"native":false},{"column":29,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._another-json-schema@2.1.0@another-json-schema/index.js","function":"iterator","line":133,"method":null,"native":false},{"column":11,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._another-json-schema@2.1.0@another-json-schema/index.js","function":"_validateObject","line":108,"method":null,"native":false},{"column":25,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._mongolass@2.4.5@mongolass/lib/schema.js","function":"formatCreate","line":186,"method":null,"native":false},{"column":null,"file":null,"function":"Array.forEach","line":null,"method":"forEach","native":true},{"column":12,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._mongolass@2.4.5@mongolass/lib/schema.js","function":"Query.beforeInsert","line":93,"method":"beforeInsert","native":false},{"column":44,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._mongolass@2.4.5@mongolass/lib/query.js","function":null,"line":146,"method":null,"native":false},{"column":null,"file":null,"function":"Generator.next","line":null,"method":"next","native":false},{"column":19,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._co@4.6.0@co/index.js","function":"onFulfilled","line":65,"method":null,"native":false},{"column":5,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._co@4.6.0@co/index.js","function":null,"line":54,"method":null,"native":false},{"column":10,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._co@4.6.0@co/index.js","function":"co","line":50,"method":null,"native":false},{"column":23,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/util.js","function":"tryCatcher","line":16,"method":null,"native":false},{"column":31,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js","function":"Promise._settlePromiseFromHandler","line":512,"method":"_settlePromiseFromHandler","native":false},{"column":18,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js","function":"Promise._settlePromise","line":569,"method":"_settlePromise","native":false},{"column":10,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js","function":"Promise._settlePromiseCtx","line":606,"method":"_settlePromiseCtx","native":false},{"column":16,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._mongolass@2.4.5@mongolass/lib/query.js","function":"Model.insert","line":108,"method":"insert","native":false},{"column":20,"file":"/Users/cheungcj/Documents/Learning/node/blog/models/comments.js","function":"Object.create","line":15,"method":"create","native":false},{"column":16,"file":"/Users/cheungcj/Documents/Learning/node/blog/routers/posts.js","function":null,"line":141,"method":null,"native":false},{"column":5,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js","function":"Layer.handle [as handle_request]","line":95,"method":"handle [as handle_request]","native":false},{"column":13,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js","function":"next","line":137,"method":null,"native":false},{"column":5,"file":"/Users/cheungcj/Documents/Learning/node/blog/middlewares/check.js","function":"checkLogin","line":7,"method":null,"native":false},{"column":5,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js","function":"Layer.handle [as handle_request]","line":95,"method":"handle [as handle_request]","native":false},{"column":13,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js","function":"next","line":137,"method":null,"native":false},{"column":3,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js","function":"Route.dispatch","line":112,"method":"dispatch","native":false},{"column":5,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js","function":"Layer.handle [as handle_request]","line":95,"method":"handle [as handle_request]","native":false},{"column":3,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"Function.process_params","line":410,"method":"process_params","native":false},{"column":10,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"next","line":275,"method":null,"native":false},{"column":3,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"Function.handle","line":174,"method":"handle","native":false},{"column":12,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"router","line":47,"method":null,"native":false},{"column":5,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js","function":"Layer.handle [as handle_request]","line":95,"method":"handle [as handle_request]","native":false},{"column":13,"file":"/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js","function":"trim_prefix","line":317,"method":null,"native":false}],"stack":["Error: ($.postId: undefined) ✖ (type: ObjectId)","    at throwError (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._another-json-schema@2.1.0@another-json-schema/index.js:213:17)","    at validate (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._another-json-schema@2.1.0@another-json-schema/index.js:184:7)","    at iterator (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._another-json-schema@2.1.0@another-json-schema/index.js:133:29)","    at _validateObject (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._another-json-schema@2.1.0@another-json-schema/index.js:108:11)","    at formatCreate (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._mongolass@2.4.5@mongolass/lib/schema.js:186:25)","    at Array.forEach (native)","    at Query.beforeInsert (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._mongolass@2.4.5@mongolass/lib/schema.js:93:12)","    at /Users/cheungcj/Documents/Learning/node/blog/node_modules/._mongolass@2.4.5@mongolass/lib/query.js:146:44","    at Generator.next (<anonymous>)","    at onFulfilled (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._co@4.6.0@co/index.js:65:19)","    at /Users/cheungcj/Documents/Learning/node/blog/node_modules/._co@4.6.0@co/index.js:54:5","    at co (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._co@4.6.0@co/index.js:50:10)","    at tryCatcher (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/util.js:16:23)","    at Promise._settlePromiseFromHandler (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js:512:31)","    at Promise._settlePromise (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js:569:18)","    at Promise._settlePromiseCtx (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._bluebird@3.5.0@bluebird/js/release/promise.js:606:10)","----- Mongolass error stack -----","Error","    at Model.insert (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._mongolass@2.4.5@mongolass/lib/query.js:108:16)","    at Object.create (/Users/cheungcj/Documents/Learning/node/blog/models/comments.js:15:20)","    at /Users/cheungcj/Documents/Learning/node/blog/routers/posts.js:141:16","    at Layer.handle [as handle_request] (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js:95:5)","    at next (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js:137:13)","    at checkLogin (/Users/cheungcj/Documents/Learning/node/blog/middlewares/check.js:7:5)","    at Layer.handle [as handle_request] (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js:95:5)","    at next (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js:137:13)","    at Route.dispatch (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/route.js:112:3)","    at Layer.handle [as handle_request] (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js:95:5)","    at Function.process_params (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:410:3)","    at next (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:275:10)","    at Function.handle (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:174:3)","    at router (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:47:12)","    at Layer.handle [as handle_request] (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/layer.js:95:5)","    at trim_prefix (/Users/cheungcj/Documents/Learning/node/blog/node_modules/._express@4.15.2@express/lib/router/index.js:317:13)"],"req":{"url":"/posts/58f9d6056a64af3fa4daee82/comment","headers":{"host":"localhost:3000","accept":"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","accept-encoding":"gzip, deflate","accept-language":"zh-cn","content-type":"application/x-www-form-urlencoded","origin":"http://localhost:3000","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_4) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.1 Safari/603.1.30","connection":"keep-alive","upgrade-insecure-requests":"1","referer":"http://localhost:3000/posts/58f9d6056a64af3fa4daee82","content-length":"12","cookie":"blog=s%3Abm__WnE7YlB8u4vIb0zMs8F0oB33RBFK.yQZcj0CQX%2FOf6nDma90CaPeBmcpUTpIxfVXxucuDVTo; myblog=s%3A4xhzRAs2wkyxpP934Jr3hPyMEE_ovVf-.qfnDmdvNXCZxeXvSKzYFGyAea5aoDIUixz5RI6uBqvM"},"method":"POST","httpVersion":"1.1","originalUrl":"/posts/58f9d6056a64af3fa4daee82/comment","query":{}},"level":"error","message":"middlewareError","timestamp":"2017-04-21T09:56:52.687Z"}
